!function(){"use strict";window.MeasurementCache={elements:new WeakMap,global:{headerHeight:0,viewportWidth:0,viewportHeight:0,scrollY:0,scrollX:0,documentHeight:0,documentWidth:0},sections:[],carousels:new WeakMap,init:function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.cacheAll()):requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.cacheAll()})}),this.setupResizeObserver()},cacheAll:function(){const e=document.querySelector(".site-header, .navbar"),t=document.querySelectorAll("section[id], .hero-book[id]"),o=document.querySelectorAll(".carousel-track"),i=document.querySelectorAll(".testimonials-grid");this.global.viewportWidth=window.innerWidth,this.global.viewportHeight=window.innerHeight,this.global.scrollY=window.scrollY,this.global.scrollX=window.scrollX,this.global.documentHeight=document.documentElement.scrollHeight,this.global.documentWidth=document.documentElement.scrollWidth,e&&(this.global.headerHeight=e.offsetHeight,this.elements.set(e,{height:e.offsetHeight,width:e.offsetWidth,top:e.offsetTop,left:e.offsetLeft})),this.sections=Array.from(t).map(e=>({id:e.id,element:e,top:e.offsetTop,height:e.offsetHeight,bottom:e.offsetTop+e.offsetHeight})),o.forEach(e=>{const t=e.querySelectorAll(".carousel-item");t.length>0&&this.carousels.set(e,{itemWidth:t[0].offsetWidth,itemCount:t.length,gap:24,trackWidth:e.offsetWidth})}),i.forEach(e=>{const t=e.querySelectorAll(".testimonial-card");t.length>0&&this.carousels.set(e,{itemWidth:t[0].offsetWidth,itemCount:t.length,gap:24,trackWidth:e.offsetWidth})})},getElement:function(e){return this.elements.has(e)||this.elements.set(e,{height:e.offsetHeight,width:e.offsetWidth,top:e.offsetTop,left:e.offsetLeft}),this.elements.get(e)},getCarousel:function(e){return this.carousels.get(e)},getCurrentSection:function(e=window.scrollY){const t=e+(this.global.headerHeight+100);for(let e of this.sections)if(t>=e.top&&t<e.bottom)return e;return null},setupResizeObserver:function(){let e;const t=()=>{clearTimeout(e),e=setTimeout(()=>{this.cacheAll()},250)};if("ResizeObserver"in window){new ResizeObserver(t).observe(document.documentElement)}else window.addEventListener("resize",t,{passive:!0})},updateScroll:function(){this.global.scrollY=window.scrollY,this.global.scrollX=window.scrollX},recache:function(){requestAnimationFrame(()=>{this.cacheAll()})}},window.MeasurementCache.init()}();